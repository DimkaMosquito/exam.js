<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Exam.js</title>
</head>
<link rel="stylesheet" type="text/css" href="css/style.css">

<body>
    <div class="top-panel">Exam.js</div>
    <br>
    <br>
    <br>
    <div class="box promo-text">
        This is markdown extantion that allows you to create tests for students
    </div>
    <div class="box">
        <div class="result result-box">
            <textarea id="editor" contenteditable="true"></textarea>
            <div id="result"></div>
        </div>
    </div>
    <script type="text/javascript" src="build/exam.js"></script>
    <script type="text/javascript">
        var exam = new Exam();
        var resultDiv = document.getElementById('result');
        var editor = document.getElementById('editor');

        function update()
        {
            var source = editor.value;
            var resultHTML = exam.parse(source);
            resultDiv.innerHTML = resultHTML;
        }

        editor.oninput = update;
        
        var observe;
        if (window.attachEvent)
        {
            observe = function(element, event, handler)
            {
                element.attachEvent('on' + event, handler);
            };
        }
        else
        {
            observe = function(element, event, handler)
            {
                element.addEventListener(event, handler, false);
            };
        }

        var text = document.getElementById('editor');

        function resize()
        {
            text.style.height = 'auto';
            text.style.height = text.scrollHeight + 'px';
        }
        /* 0-timeout to get the already changed text */
        function delayedResize()
        {
            window.setTimeout(resize, 0);

        }
        observe(text, 'change', resize);
        observe(text, 'cut', delayedResize);
        observe(text, 'paste', delayedResize);
        observe(text, 'drop', delayedResize);
        observe(text, 'keydown', delayedResize);

        text.focus();
        text.select();
        resize();
    </script>

</body>

</html>
